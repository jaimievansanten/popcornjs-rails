/*
 * popcorn.js version 1.3
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

(function(){document.addEventListener=document.addEventListener||function(j,p){j=j==="DOMContentLoaded"?"onreadystatechange":"on"+j;document.attachEvent(j,p)};document.removeEventListener=document.removeEventListener||function(j,p){j=j==="DOMContentLoaded"?"onreadystatechange":"on"+j;document.detachEvent(j,p)};HTMLScriptElement.prototype.addEventListener=HTMLScriptElement.prototype.addEventListener||function(j,p){j=j==="load"?"onreadystatechange":"on"+j;this.attachEvent(j,p)};HTMLScriptElement.prototype.removeEventListener=
HTMLScriptElement.prototype.removeEventListener||function(j,p){j=j==="load"?"onreadystatechange":"on"+j;this.detachEvent(j,p)};document.createEvent=document.createEvent||function(){return{type:null,target:null,currentTarget:null,cancelable:false,bubbles:false,initEvent:function(j){this.type=j},stopPropagation:function(){},stopImmediatePropagation:function(){}}};Array.prototype.forEach=Array.prototype.forEach||function(j,p){var B=Object.prototype.hasOwnProperty;if(!this||!j)return{};p=p||this;for(var h in this)B.call(this,
h)&&j.call(p,this[h],h,this);return this};if(!Array.prototype.map)Array.prototype.map=function(j,p){var B,h,k;if(this==null)throw new TypeError("this is null or not defined");var o=Object(this),s=o.length>>>0;if({}.toString.call(j)!="[object Function]")throw new TypeError(j+" is not a function");if(p)B=p;h=Array(s);for(k=0;k<s;){var t;if(k in o){t=o[k];t=j.call(B,t,k,o);h[k]=t}k++}return h};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(j){if(this==null)throw new TypeError;var p=Object(this),
B=p.length>>>0;if(B===0)return-1;var h=0;if(arguments.length>0){h=Number(arguments[1]);if(h!=h)h=0;else if(h!=0&&h!=Infinity&&h!=-Infinity)h=(h>0||-1)*Math.floor(Math.abs(h))}if(h>=B)return-1;for(h=h>=0?h:Math.max(B-Math.abs(h),0);h<B;h++)if(h in p&&p[h]===j)return h;return-1}})();
(function(j,p){function B(a,b){return function(){if(c.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(e){c.plugin.errors.push({plugin:b,thrown:e,source:a.toString()});this.emit("pluginerror",c.plugin.errors)}}}if(p.addEventListener){var h=Array.prototype,k=Object.prototype,o=h.forEach,s=h.slice,t=k.hasOwnProperty,z=k.toString,u=j.Popcorn,y=[],D=false,A={events:{hash:{},apis:{}}},E=function(){return j.requestAnimationFrame||j.webkitRequestAnimationFrame||j.mozRequestAnimationFrame||
j.oRequestAnimationFrame||j.msRequestAnimationFrame||function(a){j.setTimeout(a,16)}}(),c=function(a,b){return new c.p.init(a,b||null)};c.version="1.3";c.isSupported=true;c.instances=[];c.p=c.prototype={init:function(a,b){var e,d=this;if(typeof a==="function")if(p.readyState==="complete")a(p,c);else{y.push(a);if(!D){D=true;var f=function(){p.removeEventListener("DOMContentLoaded",f,false);for(var n=0,r=y.length;n<r;n++)y[n].call(p,c);y=null};p.addEventListener("DOMContentLoaded",f,false)}}else{if(typeof a===
"string")try{e=p.querySelector(a)}catch(g){throw Error("Popcorn.js Error: Invalid media element selector: "+a);}this.media=e||a;e=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[e]=this.media;this.options=b||{};this.id=this.options.id||c.guid(e);if(c.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:c.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},
trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}};c.instances.push(this);var l=function(){if(d.media.currentTime<0)d.media.currentTime=0;d.media.removeEventListener("loadeddata",l,false);var n,r,w,m,i;n=d.media.duration;n=n!=n?Number.MAX_VALUE:n+1;c.addTrackEvent(d,{start:n,end:n});if(d.options.frameAnimation){d.data.timeUpdate=function(){c.timeUpdate(d,{});c.forEach(c.manifest,function(q,I){if(r=d.data.running[I]){m=r.length;
for(var G=0;G<m;G++){w=r[G];(i=w._natives)&&i.frame&&i.frame.call(d,{},w,d.currentTime())}}});d.emit("timeupdate");!d.isDestroyed&&E(d.data.timeUpdate)};!d.isDestroyed&&E(d.data.timeUpdate)}else{d.data.timeUpdate=function(q){c.timeUpdate(d,q)};d.isDestroyed||d.media.addEventListener("timeupdate",d.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return d.media.error}});d.media.readyState>=2?l():d.media.addEventListener("loadeddata",l,false);return this}}};c.p.init.prototype=
c.p;c.byId=function(a){for(var b=c.instances,e=b.length,d=0;d<e;d++)if(b[d].id===a)return b[d];return null};c.forEach=function(a,b,e){if(!a||!b)return{};e=e||this;var d,f;if(o&&a.forEach===o)return a.forEach(b,e);if(z.call(a)==="[object NodeList]"){d=0;for(f=a.length;d<f;d++)b.call(e,a[d],d,a);return a}for(d in a)t.call(a,d)&&b.call(e,a[d],d,a);return a};c.extend=function(a){var b=s.call(arguments,1);c.forEach(b,function(e){for(var d in e)a[d]=e[d]});return a};c.extend(c,{noConflict:function(a){if(a)j.Popcorn=
u;return c},error:function(a){throw Error(a);},guid:function(a){c.guid.counter++;return(a?a:"")+(+new Date+c.guid.counter)},sizeOf:function(a){var b=0,e;for(e in a)b++;return b},isArray:Array.isArray||function(a){return z.call(a)==="[object Array]"},nop:function(){},position:function(a){a=a.getBoundingClientRect();var b={},e=p.documentElement,d=p.body,f,g,l;f=e.clientTop||d.clientTop||0;g=e.clientLeft||d.clientLeft||0;l=j.pageYOffset&&e.scrollTop||d.scrollTop;e=j.pageXOffset&&e.scrollLeft||d.scrollLeft;
f=Math.ceil(a.top+l-f);g=Math.ceil(a.left+e-g);for(var n in a)b[n]=Math.round(a[n]);return c.extend({},b,{top:f,left:g})},disable:function(a,b){if(!a.data.disabled[b]){a.data.disabled[b]=true;for(var e=a.data.running[b].length-1,d;e>=0;e--){d=a.data.running[b][e];d._natives.end.call(a,null,d)}}return a},enable:function(a,b){if(a.data.disabled[b]){a.data.disabled[b]=false;for(var e=a.data.running[b].length-1,d;e>=0;e--){d=a.data.running[b][e];d._natives.start.call(a,null,d)}}return a},destroy:function(a){var b=
a.data.events,e=a.data.trackEvents,d,f,g,l;for(f in b){d=b[f];for(g in d)delete d[g];b[f]=null}for(l in c.registryByName)c.removePlugin(a,l);e.byStart.length=0;e.byEnd.length=0;if(!a.isDestroyed){a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,false);a.isDestroyed=true}}});c.guid.counter=1;c.extend(c.p,function(){var a={};c.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),
function(b){a[b]=function(e){var d;if(typeof this.media[b]==="function"){if(e!=null&&/play|pause/.test(b))this.media.currentTime=c.util.toSeconds(e);this.media[b]();return this}if(e!=null){d=this.media[b];this.media[b]=e;d!==e&&this.emit("attrchange",{attribute:b,previousValue:d,currentValue:e});return this}return this.media[b]}});return a}());c.forEach("enable disable".split(" "),function(a){c.p[a]=function(b){return c[a](this,b)}});c.extend(c.p,{roundTime:function(){return Math.round(this.media.currentTime)},
exec:function(a,b,e){var d=arguments.length,f,g;try{g=c.util.toSeconds(a)}catch(l){}if(typeof g==="number")a=g;if(typeof a==="number"&&d===2){e=b;b=a;a=c.guid("cue")}else if(d===1)b=-1;else if(f=this.getTrackEvent(a)){if(typeof a==="string"&&d===2){if(typeof b==="number")e=f._natives.start;if(typeof b==="function"){e=b;b=f.start}}}else if(d>=2){if(typeof b==="string"){try{g=c.util.toSeconds(b)}catch(n){}b=g}if(typeof b==="number")e=c.nop();if(typeof b==="function"){e=b;b=-1}}c.addTrackEvent(this,
{id:a,start:b,end:b+1,_running:false,_natives:{start:e||c.nop,end:c.nop,type:"cue"}});return this},mute:function(a){a=a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:!a)},position:function(){return c.position(this.media)},toggle:function(a){return c[this.data.disabled[a]?"enable":
"disable"](this,a)},defaults:function(a,b){if(c.isArray(a)){c.forEach(a,function(e){for(var d in e)this.defaults(d,e[d])},this);return this}if(!this.options.defaults)this.options.defaults={};this.options.defaults[a]||(this.options.defaults[a]={});c.extend(this.options.defaults[a],b);return this}});c.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};
c.Events.Natives=c.Events.UIEvents+" "+c.Events.MouseEvents+" "+c.Events.Events;A.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(a,b){for(var e=A.events.apiTypes,d=a.Natives.split(/\s+/g),f=0,g=d.length;f<g;f++)b.hash[d[f]]=true;e.forEach(function(l){b.apis[l]={};for(var n=a[l].split(/\s+/g),r=n.length,w=0;w<r;w++)b.apis[l][n[w]]=true})})(c.Events,A.events);c.events={isNative:function(a){return!!A.events.hash[a]},getInterface:function(a){if(!c.events.isNative(a))return false;var b=
A.events,e=b.apiTypes;b=b.apis;for(var d=0,f=e.length,g,l;d<f;d++){l=e[d];if(b[l][a]){g=l;break}}return g},all:c.Events.Natives.split(/\s+/g),fn:{trigger:function(a,b){var e;if(this.data.events[a]&&c.sizeOf(this.data.events[a])){if(e=c.events.getInterface(a)){e=p.createEvent(e);e.initEvent(a,true,true,j,1);this.media.dispatchEvent(e);return this}c.forEach(this.data.events[a],function(d){d.call(this,b)},this)}return this},listen:function(a,b){var e=this,d=true,f=c.events.hooks[a],g;if(!this.data.events[a]){this.data.events[a]=
{};d=false}if(f){f.add&&f.add.call(this,{},b);if(f.bind)a=f.bind;if(f.handler){g=b;b=function(l){f.handler.call(e,l,g)}}d=true;if(!this.data.events[a]){this.data.events[a]={};d=false}}this.data.events[a][b.name||b.toString()+c.guid()]=b;!d&&c.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(l){c.forEach(e.data.events[a],function(n){typeof n==="function"&&n.call(e,l)})},false);return this},unlisten:function(a,b){if(this.data.events[a]&&this.data.events[a][b]){delete this.data.events[a][b];
return this}this.data.events[a]=null;return this}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,b){var e=false;if(this.media.readyState){b.call(this,a);e=true}this.data.hooks.canplayall={fired:e}},handler:function(a,b){if(!this.data.hooks.canplayall.fired){b.call(this,a);this.data.hooks.canplayall.fired=true}}}}};c.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){c.p[a[0]]=c.p[a[1]]=c.events.fn[a[0]]});c.addTrackEvent=function(a,b){var e,d;if(b.id)e=a.getTrackEvent(b.id);
if(e){d=true;b=c.extend({},e,b);a.removeTrackEvent(b.id)}if(b&&b._natives&&b._natives.type&&a.options.defaults&&a.options.defaults[b._natives.type])b=c.extend({},a.options.defaults[b._natives.type],b);if(b._natives){b._id=b.id||b._id||c.guid(b._natives.type);a.data.history.push(b._id)}b.start=c.util.toSeconds(b.start,a.options.framerate);b.end=c.util.toSeconds(b.end,a.options.framerate);var f=a.data.trackEvents.byStart,g=a.data.trackEvents.byEnd,l;for(l=f.length-1;l>=0;l--)if(b.start>=f[l].start){f.splice(l+
1,0,b);break}for(f=g.length-1;f>=0;f--)if(b.end>g[f].end){g.splice(f+1,0,b);break}if(b.end>a.media.currentTime&&b.start<=a.media.currentTime){b._running=true;a.data.running[b._natives.type].push(b);a.data.disabled[b._natives.type]||b._natives.start.call(a,null,b)}l<=a.data.trackEvents.startIndex&&b.start<=a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.startIndex++;f<=a.data.trackEvents.endIndex&&b.end<a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.endIndex++;this.timeUpdate(a,
null,true);b._id&&c.addTrackEvent.ref(a,b);if(d){d=b._natives.type==="cue"?"cuechange":"trackchange";a.emit(d,{id:b.id,previousValue:{time:e.start,fn:e._natives.start},currentValue:{time:b.start,fn:b._natives.start}})}};c.addTrackEvent.ref=function(a,b){a.data.trackRefs[b._id]=b;return a};c.removeTrackEvent=function(a,b){for(var e,d,f=a.data.history.length,g=a.data.trackEvents.byStart.length,l=0,n=0,r=[],w=[],m=[],i=[];--g>-1;){e=a.data.trackEvents.byStart[l];d=a.data.trackEvents.byEnd[l];if(!e._id){r.push(e);
w.push(d)}if(e._id){e._id!==b&&r.push(e);d._id!==b&&w.push(d);if(e._id===b){n=l;e._natives._teardown&&e._natives._teardown.call(a,e)}}l++}g=a.data.trackEvents.animating.length;l=0;if(g)for(;--g>-1;){e=a.data.trackEvents.animating[l];e._id||m.push(e);e._id&&e._id!==b&&m.push(e);l++}n<=a.data.trackEvents.startIndex&&a.data.trackEvents.startIndex--;n<=a.data.trackEvents.endIndex&&a.data.trackEvents.endIndex--;a.data.trackEvents.byStart=r;a.data.trackEvents.byEnd=w;a.data.trackEvents.animating=m;for(g=
0;g<f;g++)a.data.history[g]!==b&&i.push(a.data.history[g]);a.data.history=i;c.removeTrackEvent.ref(a,b)};c.removeTrackEvent.ref=function(a,b){delete a.data.trackRefs[b];return a};c.getTrackEvents=function(a){var b=[];a=a.data.trackEvents.byStart;for(var e=a.length,d=0,f;d<e;d++){f=a[d];f._id&&b.push(f)}return b};c.getTrackEvents.ref=function(a){return a.data.trackRefs};c.getTrackEvent=function(a,b){return a.data.trackRefs[b]};c.getTrackEvent.ref=function(a,b){return a.data.trackRefs[b]};c.getLastTrackEventId=
function(a){return a.data.history[a.data.history.length-1]};c.timeUpdate=function(a,b){var e=a.media.currentTime,d=a.data.trackEvents.previousUpdateTime,f=a.data.trackEvents,g=f.endIndex,l=f.startIndex,n=f.byStart.length,r=f.byEnd.length,w=c.registryByName,m,i,q;if(d<=e){for(;f.byEnd[g]&&f.byEnd[g].end<=e;){m=f.byEnd[g];i=(d=m._natives)&&d.type;if(!d||w[i]||a[i]){if(m._running===true){m._running=false;q=a.data.running[i];q.splice(q.indexOf(m),1);if(!a.data.disabled[i]){d.end.call(a,b,m);a.emit("trackend",
c.extend({},m,{plugin:i,type:"trackend"}))}}g++}else{c.removeTrackEvent(a,m._id);return}}for(;f.byStart[l]&&f.byStart[l].start<=e;){m=f.byStart[l];i=(d=m._natives)&&d.type;if(!d||w[i]||a[i]){if(m.end>e&&m._running===false){m._running=true;a.data.running[i].push(m);if(!a.data.disabled[i]){d.start.call(a,b,m);a.emit("trackstart",c.extend({},m,{plugin:i,type:"trackstart"}))}}l++}else{c.removeTrackEvent(a,m._id);return}}}else if(d>e){for(;f.byStart[l]&&f.byStart[l].start>e;){m=f.byStart[l];i=(d=m._natives)&&
d.type;if(!d||w[i]||a[i]){if(m._running===true){m._running=false;q=a.data.running[i];q.splice(q.indexOf(m),1);if(!a.data.disabled[i]){d.end.call(a,b,m);a.emit("trackend",c.extend({},m,{plugin:i,type:"trackend"}))}}l--}else{c.removeTrackEvent(a,m._id);return}}for(;f.byEnd[g]&&f.byEnd[g].end>e;){m=f.byEnd[g];i=(d=m._natives)&&d.type;if(!d||w[i]||a[i]){if(m.start<=e&&m._running===false){m._running=true;a.data.running[i].push(m);if(!a.data.disabled[i]){d.start.call(a,b,m);a.emit("trackstart",c.extend({},
m,{plugin:i,type:"trackstart"}))}}g--}else{c.removeTrackEvent(a,m._id);return}}}f.endIndex=g;f.startIndex=l;f.previousUpdateTime=e;f.byStart.length<n&&f.startIndex--;f.byEnd.length<r&&f.endIndex--};c.extend(c.p,{getTrackEvents:function(){return c.getTrackEvents.call(null,this)},getTrackEvent:function(a){return c.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return c.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){c.removeTrackEvent.call(null,this,a);return this},
removePlugin:function(a){c.removePlugin.call(null,this,a);return this},timeUpdate:function(a){c.timeUpdate.call(null,this,a);return this},destroy:function(){c.destroy.call(null,this);return this}});c.manifest={};c.registry=[];c.registryByName={};c.plugin=function(a,b,e){if(c.protect.natives.indexOf(a.toLowerCase())>=0)c.error("'"+a+"' is a protected function name");else{var d=["start","end"],f={},g=typeof b==="function",l=["_setup","_teardown","start","end","frame"],n=function(m,i){m=m||c.nop;i=i||
c.nop;return function(){m.apply(this,arguments);i.apply(this,arguments)}};c.manifest[a]=e=e||b.manifest||{};l.forEach(function(m){b[m]=B(b[m]||c.nop,a)});var r=function(m,i){if(!i)return this;if(i.ranges&&c.isArray(i.ranges)){c.forEach(i.ranges,function(C){C=c.extend({},i,C);delete C.ranges;this[a](C)},this);return this}var q=i._natives={},I="",G;c.extend(q,m);i._natives.type=a;i._running=false;q.start=q.start||q["in"];q.end=q.end||q.out;if(i.once)q.end=n(q.end,function(){this.removeTrackEvent(i._id)});
q._teardown=n(function(){var C=s.call(arguments),F=this.data.running[q.type];C.unshift(null);C[1]._running&&F.splice(F.indexOf(i),1)&&q.end.apply(this,C)},q._teardown);i.compose=i.compose&&i.compose.split(" ")||[];i.effect=i.effect&&i.effect.split(" ")||[];i.compose=i.compose.concat(i.effect);i.compose.forEach(function(C){I=c.compositions[C]||{};l.forEach(function(F){q[F]=n(q[F],I[F])})});i._natives.manifest=e;if(!("start"in i))i.start=i["in"]||0;if(!i.end&&i.end!==0)i.end=i.out||Number.MAX_VALUE;
if(!t.call(i,"toString"))i.toString=function(){var C=["start: "+i.start,"end: "+i.end,"id: "+(i.id||i._id)];i.target!=null&&C.push("target: "+i.target);return a+" ( "+C.join(", ")+" )"};if(!i.target){G="options"in e&&e.options;i.target=G&&"target"in G&&G.target}if(i._natives)i._id=c.guid(i._natives.type);i._natives._setup&&i._natives._setup.call(this,i);c.addTrackEvent(this,i);c.forEach(m,function(C,F){F!=="type"&&d.indexOf(F)===-1&&this.on(F,C)},this);return this};c.p[a]=f[a]=function(m,i){var q;
if(m&&!i)i=m;else if(q=this.getTrackEvent(m)){i=c.extend({},q,i);c.addTrackEvent(this,i);return this}else i.id=m;this.data.running[a]=this.data.running[a]||[];q=c.extend({},this.options.defaults&&this.options.defaults[a]||{},i);return r.call(this,g?b.call(this,q):b,q)};e&&c.extend(b,{manifest:e});var w={fn:f[a],definition:b,base:b,parents:[],name:a};c.registry.push(c.extend(f,w,{type:a}));c.registryByName[a]=w;return f}};c.plugin.errors=[];c.plugin.debug=c.version==="1.3";c.removePlugin=function(a,
b){if(!b){b=a;a=c.p;if(c.protect.natives.indexOf(b.toLowerCase())>=0){c.error("'"+b+"' is a protected function name");return}var e=c.registry.length,d;for(d=0;d<e;d++)if(c.registry[d].name===b){c.registry.splice(d,1);delete c.registryByName[b];delete c.manifest[b];delete a[b];return}}e=a.data.trackEvents.byStart;d=a.data.trackEvents.byEnd;var f=a.data.trackEvents.animating,g,l;g=0;for(l=e.length;g<l;g++){if(e[g]&&e[g]._natives&&e[g]._natives.type===b){e[g]._natives._teardown&&e[g]._natives._teardown.call(a,
e[g]);e.splice(g,1);g--;l--;if(a.data.trackEvents.startIndex<=g){a.data.trackEvents.startIndex--;a.data.trackEvents.endIndex--}}d[g]&&d[g]._natives&&d[g]._natives.type===b&&d.splice(g,1)}g=0;for(l=f.length;g<l;g++)if(f[g]&&f[g]._natives&&f[g]._natives.type===b){f.splice(g,1);g--;l--}};c.compositions={};c.compose=function(a,b,e){c.manifest[a]=e||b.manifest||{};c.compositions[a]=b};c.plugin.effect=c.effect=c.compose;var H=/^(?:\.|#|\[)/;c.dom={debug:false,find:function(a,b){var e=null;a=a.trim();b=
b||p;if(a){if(!H.test(a)){e=p.getElementById(a);if(e!==null)return e}try{e=b.querySelector(a)}catch(d){if(c.dom.debug)throw Error(d);}}return e}};var x=/\?/,v={url:"",data:"",dataType:"",success:c.nop,type:"GET",async:true,xhr:function(){return new j.XMLHttpRequest}};c.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType==="script"))c.xhr.getJSONP(a.url,a.success,a.dataType==="script");else{a=c.extend({},v,a);a.ajax=a.xhr();if(a.ajax){if(a.type===
"GET"&&a.data){a.url+=(x.test(a.url)?"&":"?")+a.data;a.data=null}a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||null);return c.xhr.httpData(a)}}};c.xhr.httpData=function(a){var b,e=null,d,f=null;a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{e=JSON.parse(a.ajax.responseText)}catch(g){}b={xml:a.ajax.responseXML,text:a.ajax.responseText,json:e};if(!b.xml||!b.xml.documentElement){b.xml=null;try{d=new DOMParser;f=d.parseFromString(a.ajax.responseText,"text/xml");if(!f.getElementsByTagName("parsererror").length)b.xml=
f}catch(l){}}if(a.dataType)b=b[a.dataType];a.success.call(a.ajax,b)}};return b};c.xhr.getJSONP=function(a,b,e){var d=p.head||p.getElementsByTagName("head")[0]||p.documentElement,f=p.createElement("script"),g=false,l=[];l=/(=)\?(?=&|$)|\?\?/;var n,r;if(!e){r=a.match(/(callback=[^&]*)/);if(r!==null&&r.length){l=r[1].split("=")[1];if(l==="?")l="jsonp";n=c.guid(l);a=a.replace(/(callback=[^&]*)/,"callback="+n)}else{n=c.guid("jsonp");if(l.test(a))a=a.replace(l,"$1"+n);l=a.split(/\?(.+)?/);a=l[0]+"?";if(l[1])a+=
l[1]+"&";a+="callback="+n}window[n]=function(w){b&&b(w);g=true}}f.addEventListener("load",function(){e&&b&&b();g&&delete window[n];d.removeChild(f)},false);f.src=a;d.insertBefore(f,d.firstChild)};c.getJSONP=c.xhr.getJSONP;c.getScript=c.xhr.getScript=function(a,b){return c.xhr.getJSONP(a,b,true)};c.util={toSeconds:function(a,b){var e=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,d,f,g;if(typeof a==="number")return a;typeof a==="string"&&!e.test(a)&&c.error("Invalid time format");e=a.split(":");d=e.length-
1;f=e[d];if(f.indexOf(";")>-1){f=f.split(";");g=0;if(b&&typeof b==="number")g=parseFloat(f[1],10)/b;e[d]=parseInt(f[0],10)+g}d=e[0];return{1:parseFloat(d,10),2:parseInt(d,10)*60+parseFloat(e[1],10),3:parseInt(d,10)*3600+parseInt(e[1],10)*60+parseFloat(e[2],10)}[e.length||1]}};c.p.cue=c.p.exec;c.protect={natives:function(a){return Object.keys?Object.keys(a):function(b){var e,d=[];for(e in b)t.call(b,e)&&d.push(e);return d}(a)}(c.p).map(function(a){return a.toLowerCase()})};c.forEach({listen:"on",unlisten:"off",
trigger:"emit",exec:"cue"},function(a,b){var e=c.p[b];c.p[b]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+b+"', "+(a==null?"do not use.":"use '"+a+"' instead."));c.p[b]=e}return c.p[a].apply(this,[].slice.call(arguments))}});j.Popcorn=c}else{j.Popcorn={isSupported:false};for(h="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);h.length;)j.Popcorn[h.shift()]=
function(){}}})(window,window.document);
(function(j){var p=function(k,o){k=k||j.nop;o=o||j.nop;return function(){k.apply(this,arguments);o.apply(this,arguments)}},B=/^.*\.(ogg|oga|aac|mp3|wav)($|\?)/,h=/^.*\.(ogg|oga|aac|mp3|wav|ogg|ogv|mp4|webm)($|\?)/;j.player=function(k,o){if(!j[k]){o=o||{};var s=function(t,z,u){u=u||{};var y=new Date/1E3,D=y,A=0,E=0,c=1,H=false,x={},v=typeof t==="string"?j.dom.find(t):t,a={};Object.prototype.__defineGetter__||(a=v||document.createElement("div"));for(var b in v)if(!(b in a))if(typeof v[b]==="object")a[b]=
v[b];else if(typeof v[b]==="function")a[b]=function(d){return"length"in v[d]&&!v[d].call?v[d]:function(){return v[d].apply(v,arguments)}}(b);else j.player.defineProperty(a,b,{get:function(d){return function(){return v[d]}}(b),set:j.nop,configurable:true});var e=function(){y=new Date/1E3;if(!a.paused){a.currentTime+=y-D;a.dispatchEvent("timeupdate");setTimeout(e,10)}D=y};a.play=function(){this.paused=false;if(a.readyState>=4){D=new Date/1E3;a.dispatchEvent("play");e()}};a.pause=function(){this.paused=
true;a.dispatchEvent("pause")};j.player.defineProperty(a,"currentTime",{get:function(){return A},set:function(d){A=+d;a.dispatchEvent("timeupdate");return A},configurable:true});j.player.defineProperty(a,"volume",{get:function(){return c},set:function(d){c=+d;a.dispatchEvent("volumechange");return c},configurable:true});j.player.defineProperty(a,"muted",{get:function(){return H},set:function(d){H=+d;a.dispatchEvent("volumechange");return H},configurable:true});j.player.defineProperty(a,"readyState",
{get:function(){return E},set:function(d){return E=d},configurable:true});a.addEventListener=function(d,f){x[d]||(x[d]=[]);x[d].push(f);return f};a.removeEventListener=function(d,f){var g,l=x[d];if(l){for(g=x[d].length-1;g>=0;g--)f===l[g]&&l.splice(g,1);return f}};a.dispatchEvent=function(d){var f,g=d.type;if(!g){g=d;if(d=j.events.getInterface(g)){f=document.createEvent(d);f.initEvent(g,true,true,window,1)}}if(x[g])for(d=x[g].length-1;d>=0;d--)x[g][d].call(this,f,this)};a.src=z||"";a.duration=0;a.paused=
true;a.ended=0;u&&u.events&&j.forEach(u.events,function(d,f){a.addEventListener(f,d,false)});if(o._canPlayType(v.nodeName,z)!==false)if(o._setup)o._setup.call(a,u);else{a.readyState=4;a.dispatchEvent("loadedmetadata");a.dispatchEvent("loadeddata");a.dispatchEvent("canplaythrough")}else setTimeout(function(){a.dispatchEvent("error")},0);t=new j.p.init(a,u);if(o._teardown)t.destroy=p(t.destroy,function(){o._teardown.call(a,u)});return t};s.canPlayType=o._canPlayType=o._canPlayType||j.nop;j[k]=j.player.registry[k]=
s}};j.player.registry={};j.player.defineProperty=Object.defineProperty||function(k,o,s){k.__defineGetter__(o,s.get||j.nop);k.__defineSetter__(o,s.set||j.nop)};j.player.playerQueue=function(){var k=[],o=false;return{next:function(){o=false;k.shift();k[0]&&k[0]()},add:function(s){k.push(function(){o=true;s&&s()});!o&&k[0]()}}};j.smart=function(k,o,s){var t=["AUDIO","VIDEO"],z,u=j.dom.find(k),y;z=document.createElement("video");var D={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",
mp4:"video/mp4",mp3:"audio/mp3"};if(u){if(t.indexOf(u.nodeName)>-1&&!o){if(typeof o==="object")s=o;return j(u,s)}if(typeof o==="string")o=[o];k=0;for(srcLength=o.length;k<srcLength;k++){y=h.exec(o[k]);y=!y||!y[1]?false:z.canPlayType(D[y[1]]);if(y){o=o[k];break}for(var A in j.player.registry)if(j.player.registry.hasOwnProperty(A))if(j.player.registry[A].canPlayType(u.nodeName,o[k]))return j[A](u,o[k],s)}if(t.indexOf(u.nodeName)===-1){z=typeof o==="string"?o:o.length?o[0]:o;k=document.createElement(B.exec(z)?
t[0]:t[1]);k.controls=true;u.appendChild(k);u=k}s&&s.events&&s.events.error&&u.addEventListener("error",s.events.error,false);u.src=o;return j(u,s)}else j.error("Specified target "+k+" was not found.")}})(Popcorn);
(function(j,p){j.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=true;for(var h=0;h<onYouTubePlayerAPIReady.waiting.length;h++)onYouTubePlayerAPIReady.waiting[h]()};if(j.YT){j.quarantineYT=j.YT;j.YT=null}onYouTubePlayerAPIReady.waiting=[];var B=false;p.player("youtube",{_canPlayType:function(h,k){return typeof k==="string"&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(k)&&h.toLowerCase()!=="video"},_setup:function(h){if(!j.YT&&!B){B=true;p.getScript("//youtube.com/player_api")}var k=
this,o=false,s=document.createElement("div"),t=0,z=true,u=false,y=0,D=false,A=100,E=p.player.playerQueue(),c=function(){p.player.defineProperty(k,"currentTime",{set:function(x){if(!h.destroyed){u=true;t=Math.round(+x*100)/100}},get:function(){return t}});p.player.defineProperty(k,"paused",{get:function(){return z}});p.player.defineProperty(k,"muted",{set:function(x){if(h.destroyed)return x;if(h.youtubeObject.isMuted()!==x){x?h.youtubeObject.mute():h.youtubeObject.unMute();D=h.youtubeObject.isMuted();
k.dispatchEvent("volumechange")}return h.youtubeObject.isMuted()},get:function(){if(h.destroyed)return 0;return h.youtubeObject.isMuted()}});p.player.defineProperty(k,"volume",{set:function(x){if(h.destroyed)return x;if(h.youtubeObject.getVolume()/100!==x){h.youtubeObject.setVolume(x*100);A=h.youtubeObject.getVolume();k.dispatchEvent("volumechange")}return h.youtubeObject.getVolume()/100},get:function(){if(h.destroyed)return 0;return h.youtubeObject.getVolume()/100}});k.play=function(){if(!h.destroyed){z=
false;E.add(function(){if(h.youtubeObject.getPlayerState()!==1){u=false;h.youtubeObject.playVideo()}else E.next()})}};k.pause=function(){if(!h.destroyed){z=true;E.add(function(){h.youtubeObject.getPlayerState()!==2?h.youtubeObject.pauseVideo():E.next()})}}};s.id=k.id+p.guid();h._container=s;k.appendChild(s);var H=function(){var x,v,a,b,e=true,d=function(){if(!h.destroyed){if(u)if(t===h.youtubeObject.getCurrentTime()){u=false;k.dispatchEvent("seeked");k.dispatchEvent("timeupdate")}else h.youtubeObject.seekTo(t);
else{t=h.youtubeObject.getCurrentTime();k.dispatchEvent("timeupdate")}setTimeout(d,250)}},f=function(n){var r=h.youtubeObject.getDuration();if(isNaN(r)||r===0)setTimeout(function(){f(n*2)},n*1E3);else{k.duration=r;k.dispatchEvent("durationchange");k.dispatchEvent("loadedmetadata");k.dispatchEvent("loadeddata");k.readyState=4;d();k.dispatchEvent("canplaythrough")}};h.controls=+h.controls===0||+h.controls===1?h.controls:1;h.annotations=+h.annotations===1||+h.annotations===3?h.annotations:1;x=/^.*(?:\/|v=)(.{11})/.exec(k.src)[1];
v=(k.src.split("?")[1]||"").replace(/v=.{11}/,"");v=v.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(n,r,w){r|=0;w|=0;y=+w+r*60;return""});v=v.replace(/&start=(\d+)?/,function(n,r){r|=0;y=r;return""});o=/autoplay=1/.test(v);v=v.split(/[\&\?]/g);a={wmode:"transparent"};for(var g=0;g<v.length;g++){b=v[g].split("=");a[b[0]]=b[1]}h.youtubeObject=new YT.Player(s.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:a,videoId:x,events:{onReady:function(){A=k.volume;D=k.muted;l();z=k.paused;c();h.youtubeObject.playVideo();
k.currentTime=y},onStateChange:function(n){if(!(h.destroyed||n.data===-1))if(n.data===2){z=true;k.dispatchEvent("pause");E.next()}else if(n.data===1&&!e){z=false;k.dispatchEvent("play");k.dispatchEvent("playing");E.next()}else if(n.data===0)k.dispatchEvent("ended");else if(n.data===1&&e){e=false;if(o||!k.paused)z=false;z&&h.youtubeObject.pauseVideo();f(0.025)}},onError:function(n){if([2,100,101,150].indexOf(n.data)!==-1){k.error={customCode:n.data};k.dispatchEvent("error")}}}});var l=function(){if(!h.destroyed){if(D!==
h.youtubeObject.isMuted()){D=h.youtubeObject.isMuted();k.dispatchEvent("volumechange")}if(A!==h.youtubeObject.getVolume()){A=h.youtubeObject.getVolume();k.dispatchEvent("volumechange")}setTimeout(l,250)}}};onYouTubePlayerAPIReady.ready?H():onYouTubePlayerAPIReady.waiting.push(H)},_teardown:function(h){h.destroyed=true;var k=h.youtubeObject;if(k){k.stopVideo();k.clearVideo&&k.clearVideo()}this.removeChild(document.getElementById(h._container.id))}})})(window,Popcorn);
